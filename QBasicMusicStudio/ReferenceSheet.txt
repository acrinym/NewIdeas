# QBasic Music Studio - Reference (v2)

This reference documents the QBasic Music Studio application (version 2) for QB64 Phoenix Edition, inspired by FL Studioâ€™s pattern-based sequencer and piano roll.

## Pitch Format (PLAY Statement)
- Use notes A-G, optionally followed by # for sharp and an octave number (1-7).
- Rests are denoted by `R`.
- Examples: `C4`, `D#5`, `A3`, `R`

## Approximate Frequencies (Hz)
- **Octave 3**: C=130.81, D=146.83, E=164.81, F=174.61, G=196.00, A=220.00, B=246.94
- **Octave 4**: C=261.63, D=293.66, E=329.63, F=349.23, G=392.00, A=440.00, B=493.88
- **Octave 5**: C=523.25, D=587.33, E=659.26, F=698.46, G=783.99, A=880.00, B=987.77

## Duration
- Specify duration in beats (e.g., 1 for quarter note, 0.5 for eighth note).
- Future versions may support symbols: W (whole, 4 beats), H (half, 2 beats), Q (quarter, 1 beat), E (eighth, 0.5 beats).

## Example PLAY Sequence
- `PLAY "T120 O4 CDEFGAB > C"`
- This plays a C major scale in octave 4 at 120 BPM.

## Controls
- **S**: Save song to `.qms` file.
- **L**: Load song from `.qms` file.
- **P**: Play the entire song (all tracks and patterns).
- **N**: Choose note or rest to place with mouse clicks.
- **T**: Set time signature (beats per measure and beat value).
- **M**: Set tempo (60-240 BPM).
- **C**: Clear the current song.
- **U**: Undo the last note addition, edit, or clear.
- **W**: Export to WAV (placeholder, outputs a text file).
- **R**: Add a new pattern to the current track (up to 16 patterns).
- **K**: Select track (1-4).
- **A**: Select pattern within the current track.
- **Mouse Left-Click**: Place a note in the piano roll or note list.
- **Mouse Right-Click**: Edit a note in the piano roll or note list.

## Features
- **Pattern-Based Sequencer**: Create up to 16 patterns per track, switch with `A`, add with `R`.
- **Multi-Track Support**: Up to 4 tracks (e.g., melody, bass), select with `K`.
- **Graphical Piano Roll**: Visual note placement at the bottom of the screen; click to add notes, right-click to edit.
- **Volume Automation**: Set per-note volume (0 to 1) during note placement or editing.
- **Basic Delay Effect**: Adjustable delay (0 to 1) applied during playback.
- **WAV Export Placeholder**: Outputs a text file as a stub for future audio export.
- **Undo Functionality**: Revert the last note addition, edit, or clear with `U`.
- **Measure Display**: Notes are grouped by measures in the UI based on time signature.
- **Note Preview**: Hear notes immediately after placement or editing.
- **Save/Load**: Store songs in `.qms` files with error handling.

## MIDI to QMS Converter
- A stub for converting MIDI files to QMS format is planned (`MidiToQms.bas`). It will map MIDI note events to PLAY notation (e.g., MIDI note 60 to `C4`).
- Not yet implemented in this version.

## Notes
- This is a simplified DAW for QB64-PE, inspired by FL Studio.
- WAV export and MIDI import are placeholders due to QB64-PE limitations.
- Future versions may add duration symbols (W, H, Q, E) and MIDI support.
- See `QMusicStudio.bas` for the main program.